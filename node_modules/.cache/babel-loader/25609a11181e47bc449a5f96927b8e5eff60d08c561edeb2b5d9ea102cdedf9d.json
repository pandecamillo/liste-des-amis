{"ast":null,"code":"import React from\"react\";import{useNavigate}from\"react-router-dom\";import{useLocation}from\"react-router-dom\";import axios from\"axios\";import HeaderUser from\"../components/headerUser\";import connection from\"../connection\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PageUserRead(){const[user,setUser]=React.useState({usernom:\"\",userprenom:\"\",userphone:\"\"});const[pageLoaded,setLoaded]=React.useState(false);const location=useLocation();const locationuserid=location.pathname.split(\"/\")[2];console.log(\"read user :\"+locationuserid);React.useEffect(function(){async function getUserData(iduser){try{const appMessage=document.getElementById(\"app-message\");console.log(\"send request\");appMessage.innerHTML=waitElement;const res=await axios.get(connection+\"/user/\"+iduser);appMessage.style.display=\"none\";console.log(\"get response\");setUser({usernom:res.data[0].usernom,userprenom:res.data[0].userprenom,userphone:res.data[0].userphone});setLoaded(true);}catch(e){const appMessage=document.getElementById(\"app-message\");appMessage.innerHTML=requestFalureElement;console.log(\"Erreur lors de la connection au server\"+e);}}getUserData(locationuserid);},[locationuserid]);const navigate=useNavigate();function goToEdit(){navigate(\"/update-user/\"+locationuserid);}function goToApp(){navigate(\"/\");}async function deleteUser(){try{console.log(\"send request\");document.getElementById(\"info-message\").style.visibility=\"visible\";await axios.delete(connection+\"/user/\"+locationuserid);document.getElementById(\"info-message\").style.visibility=\"hidden\";console.log(\"get response\");goToApp();}catch{console.log(\"error server\");}}function capitalise(word){return word.charAt(0).toUpperCase()+word.slice(1).toLowerCase();}const waitElement=\"<img\\n                            src=\\\"../icons/wait.gif\\\"\\n                            style=\\\"width:80%;\\\"\\n                          />\";const requestFalureElement=\"<img\\n                                        src=\\\"../icons/no-wifi.png\\\"\\n                                        style=\\\"width:100%;\\\"\\n                                    />\\n                                    <p \\n                                    style=\\\"font-weight:bolder;\\n                                    font-size:1rem;\\n                                     margin:20px;\\n                                     text-align:center;\\n                                      color: orange\\\">\\n                                    Erreur au niveau du serveur\\n                                    </p>\\n                                    <small style=\\\"font-weight:small;font-size:small; margin:20px; text-align:center\\\">\\n                                        Veuillez r\\xE9essayer plus tard\\n                                    </small>\";return/*#__PURE__*/_jsxs(\"div\",{className:\"app-container\",children:[/*#__PURE__*/_jsx(HeaderUser,{type:\"INFO DE L'AMI\"}),!pageLoaded&&/*#__PURE__*/_jsx(\"div\",{id:\"app-message\",className:\"app-message\"}),pageLoaded&&/*#__PURE__*/_jsxs(\"div\",{className:\"user-read\",children:[/*#__PURE__*/_jsx(\"p\",{id:\"info-message\",className:\"info-message\",children:\"Veuillez patienter ...\"}),/*#__PURE__*/_jsx(\"img\",{id:\"user-profile\",className:\"user-profile-read\",src:\"../img/user-profile.png\",alt:\"profile\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-info-read\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Nom : \",/*#__PURE__*/_jsx(\"span\",{children:capitalise(user.usernom)})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Prenom : \",/*#__PURE__*/_jsx(\"span\",{children:capitalise(user.userprenom)})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Contact :\",/*#__PURE__*/_jsxs(\"span\",{children:[\"+243 \",user.userphone.slice(0,3),\" \",user.userphone.slice(3,6),\" \",user.userphone.slice(6,9)]})]})]})]}),pageLoaded&&/*#__PURE__*/_jsxs(\"div\",{className:\"user-controls\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"../icons/delete.png\",alt:\"delete\",width:45,onClick:deleteUser}),/*#__PURE__*/_jsx(\"img\",{src:\"../icons/edit.png\",alt:\"edit\",width:45,onClick:goToEdit})]})]});}export default PageUserRead;","map":{"version":3,"names":["React","useNavigate","useLocation","axios","HeaderUser","connection","jsx","_jsx","jsxs","_jsxs","PageUserRead","user","setUser","useState","usernom","userprenom","userphone","pageLoaded","setLoaded","location","locationuserid","pathname","split","console","log","useEffect","getUserData","iduser","appMessage","document","getElementById","innerHTML","waitElement","res","get","style","display","data","e","requestFalureElement","navigate","goToEdit","goToApp","deleteUser","visibility","delete","capitalise","word","charAt","toUpperCase","slice","toLowerCase","className","children","type","id","src","alt","width","onClick"],"sources":["D:/MY FILES/PROJECTS/Web/NEW WEB PROJECT/new publish/publishing/src/pages/pageUserRead.js"],"sourcesContent":["import React from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport HeaderUser from \"../components/headerUser\";\r\nimport connection from \"../connection\";\r\n\r\nfunction PageUserRead() {\r\n  const [user, setUser] = React.useState({\r\n    usernom: \"\",\r\n    userprenom: \"\",\r\n    userphone: \"\",\r\n  });\r\n  const [pageLoaded, setLoaded] = React.useState(false);\r\n  const location = useLocation();\r\n\r\n  const locationuserid = location.pathname.split(\"/\")[2];\r\n  console.log(\"read user :\" + locationuserid);\r\n\r\n  React.useEffect(\r\n    function () {\r\n      async function getUserData(iduser) {\r\n        try {\r\n          const appMessage = document.getElementById(\"app-message\");\r\n          console.log(\"send request\");\r\n          appMessage.innerHTML = waitElement;\r\n          const res = await axios.get(connection + \"/user/\" + iduser);\r\n          appMessage.style.display = \"none\";\r\n          console.log(\"get response\");\r\n          setUser({\r\n            usernom: res.data[0].usernom,\r\n            userprenom: res.data[0].userprenom,\r\n            userphone: res.data[0].userphone,\r\n          });\r\n          setLoaded(true);\r\n        } catch (e) {\r\n          const appMessage = document.getElementById(\"app-message\");\r\n          appMessage.innerHTML = requestFalureElement;\r\n          console.log(\"Erreur lors de la connection au server\" + e);\r\n        }\r\n      }\r\n      getUserData(locationuserid);\r\n    },\r\n    [locationuserid]\r\n  );\r\n\r\n  const navigate = useNavigate();\r\n\r\n  function goToEdit() {\r\n    navigate(\"/update-user/\" + locationuserid);\r\n  }\r\n\r\n  function goToApp() {\r\n    navigate(\"/\");\r\n  }\r\n\r\n  async function deleteUser() {\r\n    try {\r\n      console.log(\"send request\");\r\n      document.getElementById(\"info-message\").style.visibility = \"visible\";\r\n      await axios.delete(connection + \"/user/\" + locationuserid);\r\n      document.getElementById(\"info-message\").style.visibility = \"hidden\";\r\n      console.log(\"get response\");\r\n      goToApp();\r\n    } catch {\r\n      console.log(\"error server\");\r\n    }\r\n  }\r\n\r\n  function capitalise(word) {\r\n    return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();\r\n  }\r\n\r\n  const waitElement = `<img\r\n                            src=\"../icons/wait.gif\"\r\n                            style=\"width:80%;\"\r\n                          />`;\r\n  const requestFalureElement = `<img\r\n                                        src=\"../icons/no-wifi.png\"\r\n                                        style=\"width:100%;\"\r\n                                    />\r\n                                    <p \r\n                                    style=\"font-weight:bolder;\r\n                                    font-size:1rem;\r\n                                     margin:20px;\r\n                                     text-align:center;\r\n                                      color: orange\">\r\n                                    Erreur au niveau du serveur\r\n                                    </p>\r\n                                    <small style=\"font-weight:small;font-size:small; margin:20px; text-align:center\">\r\n                                        Veuillez r√©essayer plus tard\r\n                                    </small>`;\r\n\r\n  return (\r\n    <div className=\"app-container\">\r\n      <HeaderUser type=\"INFO DE L'AMI\" />\r\n      {!pageLoaded && <div id=\"app-message\" className=\"app-message\"></div>}\r\n      {pageLoaded && (\r\n        <div className=\"user-read\">\r\n          <p id=\"info-message\" className=\"info-message\">\r\n            Veuillez patienter ...\r\n          </p>\r\n          <img\r\n            id=\"user-profile\"\r\n            className=\"user-profile-read\"\r\n            src=\"../img/user-profile.png\"\r\n            alt=\"profile\"\r\n          />\r\n          <div className=\"user-info-read\">\r\n            <p>\r\n              Nom : <span>{capitalise(user.usernom)}</span>\r\n            </p>\r\n            <p>\r\n              Prenom : <span>{capitalise(user.userprenom)}</span>\r\n            </p>\r\n            <p>\r\n              Contact :\r\n              <span>\r\n                +243 {user.userphone.slice(0, 3)} {user.userphone.slice(3, 6)}{\" \"}\r\n                {user.userphone.slice(6, 9)}\r\n              </span>\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {pageLoaded && (\r\n        <div className=\"user-controls\">\r\n          <img\r\n            src=\"../icons/delete.png\"\r\n            alt=\"delete\"\r\n            width={45}\r\n            onClick={deleteUser}\r\n          />\r\n          <img\r\n            src=\"../icons/edit.png\"\r\n            alt=\"edit\"\r\n            width={45}\r\n            onClick={goToEdit}\r\n          />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\nexport default PageUserRead;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}