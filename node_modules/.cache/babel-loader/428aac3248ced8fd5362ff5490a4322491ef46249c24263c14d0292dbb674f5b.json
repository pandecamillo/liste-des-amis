{"ast":null,"code":"import React from\"react\";import axios from\"axios\";import User from\"../components/user\";import Header from\"../components/header\";import Footer from\"../components/footer\";import connection from\"../connection\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PageApp(){const[users,setUsers]=React.useState([]);const[pageLoaded,setLoaded]=React.useState(false);React.useEffect(function(){console.log(\"effect\");async function fetchAllUsers(){try{const appMessage=document.getElementById(\"app-message\");console.log(\"send request\");appMessage.innerHTML=waitElement;console.log(connection+\"/users\");const res=await axios.get(connection+\"/users\");appMessage.style.display=\"none\";console.log(\"get response\");setUsers(res.data);setLoaded(true);}catch{const appMessage=document.getElementById(\"app-message\");appMessage.innerHTML=requestFalureElement;//document.getElementById(\"container\")\n//.innerHTML = \"<p>Erreur lors de la connection au server.</p>\";\n}}fetchAllUsers();},[]);let usersElements=[];if(users!=[]){usersElements=users.map(user=>{return/*#__PURE__*/_jsx(User,{...user},user.userid);});}console.log(users);const waitElement=\"<img\\n                            src=\\\"../icons/wait.gif\\\"\\n                            style=\\\"width:80%;\\\"\\n                          />\";const requestFalureElement=\"<img\\n                                        src=\\\"../icons/no-wifi.png\\\"\\n                                        style=\\\"width:100%;\\\"\\n                                    />\\n                                    <p \\n                                    style=\\\"font-weight:bolder;\\n                                    font-size:1rem;\\n                                     margin:20px;\\n                                     text-align:center;\\n                                      color: orange\\\">\\n                                    Erreur au niveau du serveur\\n                                    </p>\\n                                    <small style=\\\"font-weight:small;font-size:small; margin:20px; text-align:center\\\">\\n                                        Veuillez r\\xE9essayer plus tard\\n                                    </small>\";console.log(pageLoaded);console.log(\"render\");console.log(users);return/*#__PURE__*/_jsxs(\"div\",{className:\"app-container\",children:[/*#__PURE__*/_jsx(Header,{}),pageLoaded&&usersElements.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"Aucun Utilisateur\"}),pageLoaded&&/*#__PURE__*/_jsx(\"div\",{className:\"user-list-container\",children:usersElements}),/*#__PURE__*/_jsx(\"div\",{id:\"app-message\",className:\"app-message\"}),pageLoaded&&/*#__PURE__*/_jsx(Footer,{})]});}export default PageApp;","map":{"version":3,"names":["React","axios","User","Header","Footer","connection","jsx","_jsx","jsxs","_jsxs","PageApp","users","setUsers","useState","pageLoaded","setLoaded","useEffect","console","log","fetchAllUsers","appMessage","document","getElementById","innerHTML","waitElement","res","get","style","display","data","requestFalureElement","usersElements","map","user","userid","className","children","length","id"],"sources":["D:/MY FILES/PROJECTS/Web/NEW WEB PROJECT/new publish/publishing/src/pages/pageApp.js"],"sourcesContent":["import React from \"react\";\r\nimport axios from \"axios\";\r\nimport User from \"../components/user\";\r\nimport Header from \"../components/header\";\r\nimport Footer from \"../components/footer\";\r\nimport connection from \"../connection\";\r\n\r\nfunction PageApp() {\r\n  const [users, setUsers] = React.useState([]);\r\n  const [pageLoaded, setLoaded] = React.useState(false);\r\n\r\n  React.useEffect(function () {\r\n    console.log(\"effect\");\r\n    async function fetchAllUsers() {\r\n      try {\r\n        const appMessage = document.getElementById(\"app-message\");\r\n        console.log(\"send request\");\r\n        appMessage.innerHTML = waitElement;\r\n        console.log(connection + \"/users\");\r\n        const res = await axios.get(connection + \"/users\");\r\n        appMessage.style.display = \"none\";\r\n        console.log(\"get response\");\r\n        setUsers(res.data);\r\n        setLoaded(true);\r\n      } catch {\r\n        const appMessage = document.getElementById(\"app-message\");\r\n        appMessage.innerHTML = requestFalureElement;\r\n        //document.getElementById(\"container\")\r\n        //.innerHTML = \"<p>Erreur lors de la connection au server.</p>\";\r\n      }\r\n    }\r\n    fetchAllUsers();\r\n  }, []);\r\n\r\n  let usersElements = [];\r\n\r\n  if (users != []) {\r\n    usersElements = users.map((user) => {\r\n      return <User key={user.userid} {...user} />;\r\n    });\r\n  }\r\n\r\n  console.log(users);\r\n\r\n  const waitElement = `<img\r\n                            src=\"../icons/wait.gif\"\r\n                            style=\"width:80%;\"\r\n                          />`;\r\n  const requestFalureElement = `<img\r\n                                        src=\"../icons/no-wifi.png\"\r\n                                        style=\"width:100%;\"\r\n                                    />\r\n                                    <p \r\n                                    style=\"font-weight:bolder;\r\n                                    font-size:1rem;\r\n                                     margin:20px;\r\n                                     text-align:center;\r\n                                      color: orange\">\r\n                                    Erreur au niveau du serveur\r\n                                    </p>\r\n                                    <small style=\"font-weight:small;font-size:small; margin:20px; text-align:center\">\r\n                                        Veuillez r√©essayer plus tard\r\n                                    </small>`;\r\n  console.log(pageLoaded);\r\n  console.log(\"render\");\r\n  console.log(users);\r\n\r\n  return (\r\n    <div className=\"app-container\">\r\n      <Header />\r\n      {pageLoaded && usersElements.length === 0 && <p>Aucun Utilisateur</p>}\r\n      {pageLoaded && <div className=\"user-list-container\">{usersElements}</div>}\r\n      <div id=\"app-message\" className=\"app-message\"></div>\r\n      {pageLoaded && <Footer />}\r\n    </div>\r\n  );\r\n}\r\nexport default PageApp;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,IAAI,KAAM,oBAAoB,CACrC,MAAO,CAAAC,MAAM,KAAM,sBAAsB,CACzC,MAAO,CAAAC,MAAM,KAAM,sBAAsB,CACzC,MAAO,CAAAC,UAAU,KAAM,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEvC,QAAS,CAAAC,OAAOA,CAAA,CAAG,CACjB,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGZ,KAAK,CAACa,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACC,UAAU,CAAEC,SAAS,CAAC,CAAGf,KAAK,CAACa,QAAQ,CAAC,KAAK,CAAC,CAErDb,KAAK,CAACgB,SAAS,CAAC,UAAY,CAC1BC,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC,CACrB,cAAe,CAAAC,aAAaA,CAAA,CAAG,CAC7B,GAAI,CACF,KAAM,CAAAC,UAAU,CAAGC,QAAQ,CAACC,cAAc,CAAC,aAAa,CAAC,CACzDL,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC,CAC3BE,UAAU,CAACG,SAAS,CAAGC,WAAW,CAClCP,OAAO,CAACC,GAAG,CAACb,UAAU,CAAG,QAAQ,CAAC,CAClC,KAAM,CAAAoB,GAAG,CAAG,KAAM,CAAAxB,KAAK,CAACyB,GAAG,CAACrB,UAAU,CAAG,QAAQ,CAAC,CAClDe,UAAU,CAACO,KAAK,CAACC,OAAO,CAAG,MAAM,CACjCX,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC,CAC3BN,QAAQ,CAACa,GAAG,CAACI,IAAI,CAAC,CAClBd,SAAS,CAAC,IAAI,CAAC,CACjB,CAAE,KAAM,CACN,KAAM,CAAAK,UAAU,CAAGC,QAAQ,CAACC,cAAc,CAAC,aAAa,CAAC,CACzDF,UAAU,CAACG,SAAS,CAAGO,oBAAoB,CAC3C;AACA;AACF,CACF,CACAX,aAAa,CAAC,CAAC,CACjB,CAAC,CAAE,EAAE,CAAC,CAEN,GAAI,CAAAY,aAAa,CAAG,EAAE,CAEtB,GAAIpB,KAAK,EAAI,EAAE,CAAE,CACfoB,aAAa,CAAGpB,KAAK,CAACqB,GAAG,CAAEC,IAAI,EAAK,CAClC,mBAAO1B,IAAA,CAACL,IAAI,KAAuB+B,IAAI,EAArBA,IAAI,CAACC,MAAmB,CAAC,CAC7C,CAAC,CAAC,CACJ,CAEAjB,OAAO,CAACC,GAAG,CAACP,KAAK,CAAC,CAElB,KAAM,CAAAa,WAAW,8IAGU,CAC3B,KAAM,CAAAM,oBAAoB,k1BAciB,CAC3Cb,OAAO,CAACC,GAAG,CAACJ,UAAU,CAAC,CACvBG,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC,CACrBD,OAAO,CAACC,GAAG,CAACP,KAAK,CAAC,CAElB,mBACEF,KAAA,QAAK0B,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5B7B,IAAA,CAACJ,MAAM,GAAE,CAAC,CACTW,UAAU,EAAIiB,aAAa,CAACM,MAAM,GAAK,CAAC,eAAI9B,IAAA,MAAA6B,QAAA,CAAG,mBAAiB,CAAG,CAAC,CACpEtB,UAAU,eAAIP,IAAA,QAAK4B,SAAS,CAAC,qBAAqB,CAAAC,QAAA,CAAEL,aAAa,CAAM,CAAC,cACzExB,IAAA,QAAK+B,EAAE,CAAC,aAAa,CAACH,SAAS,CAAC,aAAa,CAAM,CAAC,CACnDrB,UAAU,eAAIP,IAAA,CAACH,MAAM,GAAE,CAAC,EACtB,CAAC,CAEV,CACA,cAAe,CAAAM,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}