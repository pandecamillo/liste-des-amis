{"ast":null,"code":"import React from\"react\";import{useNavigate}from\"react-router-dom\";import{useLocation}from\"react-router-dom\";import axios from\"axios\";import HeaderUser from\"../components/headerUser\";import connection from\"../connection\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PageUserEdit(){const[user,setUser]=React.useState({usernom:\"\",userprenom:\"\",userphone:\"\"});const[pageLoaded,setLoaded]=React.useState(false);const location=useLocation();const locationuserid=location.pathname.split(\"/\")[2];console.log(\"read user :\"+locationuserid);React.useEffect(function(){async function getUserData(iduser){try{const appMessage=document.getElementById(\"app-message\");console.log(\"send request\");appMessage.innerHTML=waitElement;const res=await axios.get(connection+\"/user/\"+iduser);appMessage.style.display=\"none\";console.log(\"get response\");console.log(res.data[0]);setUser({usernom:res.data[0].usernom,userprenom:res.data[0].userprenom,userphone:res.data[0].userphone});setLoaded(true);}catch(e){const appMessage=document.getElementById(\"app-message\");appMessage.innerHTML=requestFalureElement;console.log(\"Erreur lors de la connection au server\"+e);}}getUserData(locationuserid);},[locationuserid]);function handleChange(event){setUser(prev=>({...prev,[event.target.name]:event.target.value}));}const navigate=useNavigate();function goToApp(){navigate(\"/\");}async function editUser(){if(user.usernom===\"\"||user.userprenom===\"\"){alert(\"Vous devez remplir le champ\");return;}if(!user.userphone){alert(\"Veuillez donner votre numero\");return;}if(user.userphone.length!=9){alert(\"Votre numero doit avoir 9 chiffres\");return;}document.getElementById(\"btn-ajout\").disabled=true;try{console.log(\"send request\");document.getElementById(\"info-message\").style.visibility=\"visible\";const res=await axios.put(connection+\"/user/\"+locationuserid,user);document.getElementById(\"info-message\").style.visibility=\"hidden\";console.log(\"get response\");goToApp();}catch{console.log(\"Erreur lors de l'ajout\");//document.getElementById(\"container\")\n//.innerHTML = \"<p>Erreur lors de la connection au server.</p>\";\n}}/*function convertToBase64(file) {\r\n    const reader = new FileReader();\r\n    reader.addEventListener(\r\n      \"load\",\r\n      () => {\r\n        setUser((user) => ({ ...user, userprofile: reader.result }));\r\n        console.log(user);\r\n      },\r\n      false\r\n    );\r\n\r\n    if (file) {\r\n      reader.readAsDataURL(file);\r\n    }\r\n  }\r\n\r\n  function importData() {\r\n    let input = document.createElement(\"input\");\r\n    input.type = \"file\";\r\n    input.onchange = (_) => {\r\n      // you can use this method to get file and perform respective operations\r\n      let files = Array.from(input.files)[0];\r\n      convertToBase64(files);\r\n    };\r\n    input.click();\r\n  }*/function handlePhone(event){if(user.userphone.length===9){console.log(user.userphone);event.preventDefault();}}function capitalise(word){return word.charAt(0).toUpperCase()+word.slice(1).toLowerCase();}const waitElement=\"<img\\n                            src=\\\"../icons/wait.gif\\\"\\n                            style=\\\"width:80%;\\\"\\n                          />\";const requestFalureElement=\"<img\\n                                        src=\\\"../icons/no-wifi.png\\\"\\n                                        style=\\\"width:100%;\\\"\\n                                    />\\n                                    <p \\n                                    style=\\\"font-weight:bolder;\\n                                    font-size:1rem;\\n                                     margin:20px;\\n                                     text-align:center;\\n                                      color: orange\\\">\\n                                    Erreur au niveau du serveur\\n                                    </p>\\n                                    <small style=\\\"font-weight:small;font-size:small; margin:20px; text-align:center\\\">\\n                                        Veuillez r\\xE9essayer plus tard\\n                                    </small>\";return/*#__PURE__*/_jsxs(\"div\",{className:\"app-container\",children:[/*#__PURE__*/_jsx(HeaderUser,{type:\"MODIFIER AMI\"}),!pageLoaded&&/*#__PURE__*/_jsx(\"div\",{id:\"app-message\",className:\"app-message\"}),pageLoaded&&/*#__PURE__*/_jsxs(\"div\",{className:\"form\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"info-message\",id:\"info-message\",children:\"Veuillez patienter ...\"}),/*#__PURE__*/_jsx(\"div\",{className:\"user-profile-input\",children:/*#__PURE__*/_jsx(\"img\",{id:\"user-profile\",className:\"user-profile\",src:\"../img/user-profile.png\",alt:\"profile\"//onClick={importData}\n})}),/*#__PURE__*/_jsx(\"input\",{autoComplete:\"off\",maxLength:15,type:\"text\",name:\"usernom\",onChange:handleChange,placeholder:\"Votre nom\",value:user.usernom}),/*#__PURE__*/_jsx(\"input\",{autoComplete:\"off\",maxLength:15,type:\"text\",name:\"userprenom\",onChange:handleChange,placeholder:\"Votre prenom\",value:user.userprenom}),/*#__PURE__*/_jsxs(\"div\",{className:\"phone-input\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"userphone\",children:\"+243\"}),/*#__PURE__*/_jsx(\"input\",{autoComplete:\"off\",type:\"number\",name:\"userphone\",placeholder:\"Votre telephone\",onChange:handleChange,onKeyPress:handlePhone,value:user.userphone})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-add-user\",onClick:editUser,id:\"btn-ajout\",children:\"MODIFIER\"})]})]});}export default PageUserEdit;","map":{"version":3,"names":["React","useNavigate","useLocation","axios","HeaderUser","connection","jsx","_jsx","jsxs","_jsxs","PageUserEdit","user","setUser","useState","usernom","userprenom","userphone","pageLoaded","setLoaded","location","locationuserid","pathname","split","console","log","useEffect","getUserData","iduser","appMessage","document","getElementById","innerHTML","waitElement","res","get","style","display","data","e","requestFalureElement","handleChange","event","prev","target","name","value","navigate","goToApp","editUser","alert","length","disabled","visibility","put","handlePhone","preventDefault","capitalise","word","charAt","toUpperCase","slice","toLowerCase","className","children","type","id","src","alt","autoComplete","maxLength","onChange","placeholder","htmlFor","onKeyPress","onClick"],"sources":["D:/MY FILES/PROJECTS/Web/NEW WEB PROJECT/new publish/publishing/src/pages/pageUserEdit.js"],"sourcesContent":["import React from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport HeaderUser from \"../components/headerUser\";\r\nimport connection from \"../connection\";\r\n\r\nfunction PageUserEdit() {\r\n  const [user, setUser] = React.useState({\r\n    usernom: \"\",\r\n    userprenom: \"\",\r\n    userphone: \"\",\r\n  });\r\n  const [pageLoaded, setLoaded] = React.useState(false);\r\n  const location = useLocation();\r\n\r\n  const locationuserid = location.pathname.split(\"/\")[2];\r\n  console.log(\"read user :\" + locationuserid);\r\n\r\n  React.useEffect(\r\n    function () {\r\n      async function getUserData(iduser) {\r\n        try {\r\n          const appMessage = document.getElementById(\"app-message\");\r\n          console.log(\"send request\");\r\n          appMessage.innerHTML = waitElement;\r\n          const res = await axios.get(connection + \"/user/\" + iduser);\r\n          appMessage.style.display = \"none\";\r\n          console.log(\"get response\");\r\n          console.log(res.data[0]);\r\n          setUser({\r\n            usernom: res.data[0].usernom,\r\n            userprenom: res.data[0].userprenom,\r\n            userphone: res.data[0].userphone,\r\n          });\r\n          setLoaded(true);\r\n        } catch (e) {\r\n          const appMessage = document.getElementById(\"app-message\");\r\n          appMessage.innerHTML = requestFalureElement;\r\n          console.log(\"Erreur lors de la connection au server\" + e);\r\n        }\r\n      }\r\n      getUserData(locationuserid);\r\n    },\r\n    [locationuserid]\r\n  );\r\n\r\n  function handleChange(event) {\r\n    setUser((prev) => ({ ...prev, [event.target.name]: event.target.value }));\r\n  }\r\n\r\n  const navigate = useNavigate();\r\n\r\n  function goToApp() {\r\n    navigate(\"/\");\r\n  }\r\n\r\n  async function editUser() {\r\n    if (user.usernom === \"\" || user.userprenom === \"\") {\r\n      alert(\"Vous devez remplir le champ\");\r\n      return;\r\n    }\r\n    if (!user.userphone) {\r\n      alert(\"Veuillez donner votre numero\");\r\n      return;\r\n    }\r\n    if (user.userphone.length != 9) {\r\n      alert(\"Votre numero doit avoir 9 chiffres\");\r\n      return;\r\n    }\r\n    document.getElementById(\"btn-ajout\").disabled = true;\r\n    try {\r\n      console.log(\"send request\");\r\n      document.getElementById(\"info-message\").style.visibility = \"visible\";\r\n      const res = await axios.put(connection + \"/user/\" + locationuserid, user);\r\n      document.getElementById(\"info-message\").style.visibility = \"hidden\";\r\n      console.log(\"get response\");\r\n      goToApp();\r\n    } catch {\r\n      console.log(\"Erreur lors de l'ajout\");\r\n      //document.getElementById(\"container\")\r\n      //.innerHTML = \"<p>Erreur lors de la connection au server.</p>\";\r\n    }\r\n  }\r\n\r\n  /*function convertToBase64(file) {\r\n    const reader = new FileReader();\r\n    reader.addEventListener(\r\n      \"load\",\r\n      () => {\r\n        setUser((user) => ({ ...user, userprofile: reader.result }));\r\n        console.log(user);\r\n      },\r\n      false\r\n    );\r\n\r\n    if (file) {\r\n      reader.readAsDataURL(file);\r\n    }\r\n  }\r\n\r\n  function importData() {\r\n    let input = document.createElement(\"input\");\r\n    input.type = \"file\";\r\n    input.onchange = (_) => {\r\n      // you can use this method to get file and perform respective operations\r\n      let files = Array.from(input.files)[0];\r\n      convertToBase64(files);\r\n    };\r\n    input.click();\r\n  }*/\r\n\r\n  function handlePhone(event) {\r\n    if (user.userphone.length === 9) {\r\n      console.log(user.userphone);\r\n      event.preventDefault();\r\n    }\r\n  }\r\n\r\n  function capitalise(word) {\r\n    return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();\r\n  }\r\n\r\n  const waitElement = `<img\r\n                            src=\"../icons/wait.gif\"\r\n                            style=\"width:80%;\"\r\n                          />`;\r\n  const requestFalureElement = `<img\r\n                                        src=\"../icons/no-wifi.png\"\r\n                                        style=\"width:100%;\"\r\n                                    />\r\n                                    <p \r\n                                    style=\"font-weight:bolder;\r\n                                    font-size:1rem;\r\n                                     margin:20px;\r\n                                     text-align:center;\r\n                                      color: orange\">\r\n                                    Erreur au niveau du serveur\r\n                                    </p>\r\n                                    <small style=\"font-weight:small;font-size:small; margin:20px; text-align:center\">\r\n                                        Veuillez réessayer plus tard\r\n                                    </small>`;\r\n\r\n  return (\r\n    <div className=\"app-container\">\r\n      <HeaderUser type=\"MODIFIER AMI\" />\r\n      {!pageLoaded && <div id=\"app-message\" className=\"app-message\"></div>}\r\n      {pageLoaded && (\r\n        <div className=\"form\">\r\n          <p className=\"info-message\" id=\"info-message\">\r\n            Veuillez patienter ...\r\n          </p>\r\n          <div className=\"user-profile-input\">\r\n            <img\r\n              id=\"user-profile\"\r\n              className=\"user-profile\"\r\n              src=\"../img/user-profile.png\"\r\n              alt=\"profile\"\r\n              //onClick={importData}\r\n            />\r\n          </div>\r\n          <input\r\n            autoComplete=\"off\"\r\n            maxLength={15}\r\n            type=\"text\"\r\n            name=\"usernom\"\r\n            onChange={handleChange}\r\n            placeholder=\"Votre nom\"\r\n            value={user.usernom}\r\n          />\r\n          <input\r\n            autoComplete=\"off\"\r\n            maxLength={15}\r\n            type=\"text\"\r\n            name=\"userprenom\"\r\n            onChange={handleChange}\r\n            placeholder=\"Votre prenom\"\r\n            value={user.userprenom}\r\n          />\r\n          <div className=\"phone-input\">\r\n            <label htmlFor=\"userphone\">+243</label>\r\n            <input\r\n              autoComplete=\"off\"\r\n              type=\"number\"\r\n              name=\"userphone\"\r\n              placeholder=\"Votre telephone\"\r\n              onChange={handleChange}\r\n              onKeyPress={handlePhone}\r\n              value={user.userphone}\r\n            />\r\n          </div>\r\n          <button className=\"btn-add-user\" onClick={editUser} id=\"btn-ajout\">\r\n            MODIFIER\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\nexport default PageUserEdit;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}